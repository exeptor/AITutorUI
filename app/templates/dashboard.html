<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>Dashboard</title>
</head>
<body>

    <!-- Header section -->
    <header class="header">
        <div class="header-content">
            <!-- Logo -->
            <div class="header-logo">
                <img src="{{ url_for('static', filename='images/logo.png') }}" class="logo"  alt="">
            </div>
            
            <!-- Conditional Header Menu based on Role -->
            {% if role == 'admin' %}
                <nav class="horizontal-menu">
                    <a href="#" class="menu-item" onclick="toggleSubMenu('users')">Users</a>
                    <a href="#" class="menu-item" onclick="toggleSubMenu('courses')">Courses</a>
                    <a href="#">Reports</a>
                    <a href="#" class="menu-item" onclick="toggleSubMenu('settings')">Settings</a>
                </nav>
            {% elif role == 'teacher' %}
                <nav class="horizontal-menu">
                    <a href="#">Home</a>
                    <a href="#">My Courses</a>
                    <a href="#">Create Lesson</a>
                </nav>
            {% elif role == 'student' %}
                <nav class="horizontal-menu">
                    <a href="#">Home</a>
                    <a href="#">Courses</a>
                    <a href="#">Blog</a>
                    <a href="#">Contacts</a>
                </nav>
            {% endif %}

            <!-- Submenu (Initially Hidden) -->
            <div class="submenu" id="submenu">
                <nav class="horizontal-menu" id="submenu-items">
                    <!-- Submenu items will be inserted here dynamically -->
                </nav>
            </div>

            <!-- User section -->
            <div class="header-user">
                <img src="{{ url_for('static', filename='images/user-icon.png') }}" alt="User Icon">
                <div style="text-align: right;">
                    <p>{{ username }} | <a href="{{ url_for('main.logout') }}">Logout</a></p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main content section -->
    <div class="main-content">
        <div id="dynamic-content"></div>

    </div>

    <script>
        let activeMenu = null;

        function toggleSubMenu(menu) {
            const submenu = document.getElementById('submenu');
            const submenuItems = document.getElementById('submenu-items');

            const menuOptions = {
                'users': [
                    { text: 'Users List', link: '/admin/users_list' },
                    { text: 'User Notifications', link: '#' }
                ],
                'courses': [
                    { text: 'Available Courses', link: '#' },
                    { text: 'Waiting for Approval', link: '#' }
                ],
                'settings': [
                    { text: 'Blog Settings', link: '#' },
                    { text: 'Other Settings', link: '#' }
                ]
            };

            if (activeMenu === menu) {
                if (submenu.style.display === 'block') {
                    submenu.style.display = 'none';
                    activeMenu = null;
                } else {
                    submenu.style.display = 'block';
                }
            } else {
                submenuItems.innerHTML = '';
                if (menuOptions[menu]) {
                    menuOptions[menu].forEach(item => {
                        const a = document.createElement('a');
                        a.href = 'javascript:void(0)';
                        a.innerText = item.text;
                        a.onclick = () => loadContent(item.link);
                        submenuItems.appendChild(a);
                    });
                }

                submenu.style.display = 'block';
                activeMenu = menu;
            }
        }

        function loadContent(content) {
            const dynamicContent = document.getElementById('dynamic-content');

            if (content === '/admin/users_list') {
                fetch('/admin/users_list')
                    .then(response => response.text())
                    .then(html => {
                        dynamicContent.innerHTML = html;
                    })
                    .catch(error => {
                        console.error('Error loading content:', error);
                    });
            } else {
                dynamicContent.innerHTML = '<p>Content not available yet.</p>';
            }
        }
    </script>
</body>
</html>
